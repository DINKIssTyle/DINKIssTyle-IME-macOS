# DKST English/Hangul IME v2 Changelog

This document outlines the major changes introduced in version 2 of the DKST IME.

## 1. Preferences UI Redesign
The Preferences window has been completely redesigned for better usability and clarity.

- **Reorganized Layout**: Settings are now grouped logically.
    1. **Caps Lock Switch**: Use Caps Lock to toggle input mode.
    2. **Menu Bar Icon**: Select between **Taegeuk** (Default) and **Hangul** icons.
        *   **Taegeuk**: Traditional Taegeuk shape (`Hangul.pdf` or `Hangul.tiff`).
        *   **Hangul**: "한" character (`Hangul_2.pdf`).
    3. **Moa-chigi**: Enable vowel+consonant combination.
    4. **Old Hangul**: Enable archaic script support (e.g., Araea).
    5. **Delete by**: Choose between **Jaso** (Unit) and **Gulja** (Syllable) deletion.
    6. **Custom Shift Shortcuts**: Enable emoji/text shortcuts.
    7. **Mapping Table**: Defines the custom shortcuts.
- **Visual Improvements**:
    - **Preferences Window**:
        - Increased label widths to prevent truncation ("Menu bar icon...").
        - Aligned radio buttons for a cleaner layout.
    - Added a copyright label "(C) 2025 DINKI'ssTyle".
    - Updated default settings:
        *   **Enable Moa-chigi**: ON
        *   **Delete by**: Jaso
        *   **Using old Korean script**: OFF
        *   **Enable Caps Lock**: OFF
        *   **Enable Custom Shift**: OFF

## 2. Engine Improvements (DKSTHangul)
- **Archaic Syllable Support**:
    - Implemented logic to support archaic combinations like "ㅎㆍᆫ".
    - Switched to using **Conjoining Jamo (U+11xx)** for archaic syllables instead of Compatibility Jamo, ensuring proper rendering by the OS font engine.
    - Fixed a crash issue where invalid combinations were appending null characters.
- **Araea Input**:
    - Typing 'ㅏ' (k) + 'ㅏ' (k) now produces Araea ('ᆞ') if "Using old Korean script" is enabled.
- **Moa-chigi**:
    - Logic preserved and integrated with new settings.

## 3. System & Build
- **API Modernization**:
    - Replaced the deprecated `launchApplication:` method with `openApplicationAtURL:`.
    - Replaced deprecated `absolutePathForAppBundleWithIdentifier:` with `URLForApplicationWithBundleIdentifier:` in Preferences.
- **Icon Support**:
    - **Dynamic Icon Switching**: Implemented logic to modify `Info.plist` at runtime to switch between icon files based on user preference.
    - **TIFF Conversion**: Converted `Hangul.png` to `Hangul.tiff` to potentially resolve tinting issues (though PDF is primarily used now).
    - Added support for PNG/TIFF resource copying in [build.sh](file:///Users/dinki/Documents/GitHub/DINKIssTyle-IME-macOS/build.sh).

## Usage
1. Run [./build.sh](file:///Users/dinki/Documents/GitHub/DINKIssTyle-IME-macOS/build.sh) to compile.
2. Run [./install.command](file:///Users/dinki/Documents/GitHub/DINKIssTyle-IME-macOS/install.command) to install.
3. Logout and login (or restart) to apply icon changes and ensure the input method is fully reloaded.
